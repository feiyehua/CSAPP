# Optimizing Program Performance
## 5.4 Eliminating Loop Inefficiencies
Remove the call `vec_length` in loop condition. This involves *code motion*, identifying a computation that is performed multiple times without a change in the result.

Sometimes the compiler can do some code motion, but cases like calling `strlen` in loop condition is beyond the most sophisticated compiler's ability.

## 5.5 Reducing Procedure Calls
Remove some unnecessary function calls in the loop.

## 5.6 Eliminating Unneeded Memory References
Use temprary variable in loop to store the result value, and write back in the end of loop.
```c
/* Access dest in loop */
void combine3(vec_ptr v, data_t *dest)
{
    long i;
    long length = vec_length(v);
    data_t *data = get_vec_start(v);

    *dest = IDENT;
    for (i = 0; i < length; i++) {
        *dest = *dest OP data[i];
    }
}
```
```c
/* Accumulate result in local variable */
void combine4(vec_ptr v, data_t *dest)
{
    long i;
    long length = vec_length(v);
    data_t *data = get_vec_start(v);
    data_t acc = IDENT;

    for (i = 0; i < length; i++) {
        acc = acc OP data[i];
    }
    *dest = acc;
}
```
Considering memory aliasing, the codes have different behaviors, so the compiler would not do such optimization.

